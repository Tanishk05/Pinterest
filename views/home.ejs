<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Pinterest | Home page</title>
   <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet" />

   <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

   <div class="main w-full h-full ">

      <div class="nav w-full [15%] flex  justify-between px-8 py-6 ">
         <div class="part1 flex gap-1">
           <div id="logo" class="x8f INd _O1 KS5 mQ8 OGJ YbY " style="height:48px;width:48px"><svg class="gUZ GjR U9O kVc"
               height="24" width="24" viewBox="0 0 24 24" aria-hidden="true" aria-label="" role="img">
               <path
                 d="M0 12c0 5.123 3.211 9.497 7.73 11.218-.11-.937-.227-2.482.025-3.566.217-.932 1.401-5.938 1.401-5.938s-.357-.715-.357-1.774c0-1.66.962-2.9 2.161-2.9 1.02 0 1.512.765 1.512 1.682 0 1.025-.653 2.557-.99 3.978-.281 1.189.597 2.159 1.769 2.159 2.123 0 3.756-2.239 3.756-5.471 0-2.861-2.056-4.86-4.991-4.86-3.398 0-5.393 2.549-5.393 5.184 0 1.027.395 2.127.889 2.726a.36.36 0 0 1 .083.343c-.091.378-.293 1.189-.332 1.355-.053.218-.173.265-.4.159-1.492-.694-2.424-2.875-2.424-4.627 0-3.769 2.737-7.229 7.892-7.229 4.144 0 7.365 2.953 7.365 6.899 0 4.117-2.595 7.431-6.199 7.431-1.211 0-2.348-.63-2.738-1.373 0 0-.599 2.282-.744 2.84-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24 12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12">
               </path>
             </svg></div>
         
           <div class="allbtns ">
             <a href="/home" class="hide buttons  p-3 ">Home</a>
             <a class="hide buttons  p-3">Explore</a>
             <a id="create" href="/createpin" class="buttons  p-3">Create</a>
   
           </div>
         </div>

         <div id="searchdiv" class="search flex gap-2 ml-2 h-full overflow-hidden items-center px-4 ">
            <i id="search" class="ri-search-line"></i>
            <input id="searchinput"  type="text" placeholder="search">
            <i id="cancel" class="ri-close-circle-fill text-xl hidden"></i>
         </div>
          

         <div class="part2-nav flex gap-5 mb-10 ">
           <a href="/profile" id="firstletter" class="nav-2 capitalize text-lg"></a>
           <a id="set" class="nav-2"><i class="ri-arrow-down-s-line text-lg"></i></a>
   
         </div>
   
       </div>
    
 

      <div id="settings" class="main-overlay hidden py-4 pl-4 w-[20vmax] rounded-2xl ">

         <p class="ml-1">cuurently in</p>
         <div class="top w-full mt-3 flex gap-4 ">
   
           <div class="profile w-[4.5vmax] h-[4.5vmax] rounded-full overflow-hidden">
             <img class="w-full h-full object-cover" src="/images/uploads/<%= user.profile %>" alt="">
           </div>
   
           <div class="right mt-1 leading-none">
             <h3 class="font-medium text-sm leading-none ">
               <%= user.username %>
             </h3>
             <p class="font-light mt-1 text-sm">Personal</p>
   
           </div>
   
   
         </div>
   
   
         <div class="account mt-4">
           <p class="text-sm ml-1">Your accounts</p>
           <a href="/add/accounts">
             <h3 class="hover px-2 py-2 text-lg mt-3 font-semibold cursor-pointer">Add account</h3>
           </a>
   
         </div>
   
         <div class="moreoptions mt-4">
           <h3 class="text-sm ml-1">settings</h3>
           <a href="/home ">
             <h3 class="hover ml-1 px-1 py-2 text-lg mt-3 font-semibold cursor-pointer">Tune your feed</h3>
           </a>
           <a href="/logout">
             <h3 class="hover ml-1 px-1 py-2 text-lg mt-3 font-semibold cursor-pointer">Log out</h3>
           </a>
   
         </div>
   
   
   
   
       </div>

       <div class="searching hidden ">
        <p id="results" class="ml-4 hidden">No results were found</p>
       
       </div>


       <div class="searchpins hidden py-[100px] px-10  overflow-hidden ">
         
       <p class="hidden" id="pinsearch">No pins were found </p>
        
       
       </div>

         
      <div class="allpins w-full px-4 flex flex-wrap gap-3" style="height: calc(100% - 15%);
    overflow-x :hidden; overflow-y:auto ">
          
              

          <% allpins.forEach(function(pin){ %>

            
            <div  class="pincontainer relative mb-4 ">
               <div class="pin w-[240px] h-[350px] bg-zinc-900 rounded-2xl  relative">
                  <img src="/images/uploads/<%= pin.image %>" alt="">
               </div>
                
                
                <a class="ml-1 mt-2 font-medium" href="/openpin/<%= pin._id %>"><%= pin.title %></a>
               <div class="pin-dets flex gap-2 items-center ">
                 
                    <a href="/profile/<%= pin.user._id %>">
                     <div class="pinprofile overflow-hidden">
                        <img src="/images/uploads/<%= pin.user.profile %>" alt="">
                        
                     </div>
                    </a>
                  
                      
                  <a href="/profile/<%= pin.user._id %>" class="cursor-pointer" style="text-decoration: none;">
                     
                     <p class="text-sm font-light">
                       <%= pin.user.username %>

                     </p>
                  </a>
               </div>

             
            
               <a href="/openpin/<%= pin._id %>">
                  <div class="overlay w-[240px] h-[350px] rounded-2xl  pt-5 ">
                    
                     <div class="top flex gap-5 px-6">
                        <h3 class="text-white mt-2 whitespace-nowrap">
                           <a href="/board/<%= pin._id %>/<%= pin.board %>"><%= pin.board %></a>
                              <span class="" style="font-size: 17px;"><i class="ri-arrow-down-s-line"></i></span>
                        </h3>
                      
                         
                    <% if(user.savedpins.indexOf(pin._id) === -1){ %>

                     <a id="save" data-val="/save/<%= pin._id %>" href="/save/<%= pin._id %>"class="mt-2 text-white bg-[red] rounded-2xl px-2" >save</a>

                  <% } else { %>
                     <a id="unsave" data-val="/unsave/<%= pin._id %>" href="/unsave/<%= pin._id %>"class="mt-2 text-white bg-[red] rounded-2xl px-2" >saved</a>   
                   
                   <% }   %>
        
                    
                  </div>
                  </div>
               </a>
            
              
            </div>


         <% })  %>

         </div>


   
   </div>


   <style>
      * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
         font-family: "gilroy";
      }

      html,
      body {
         width: 100%;
         height: 100%;
         margin: 0;
         padding: 0;
      }



     .nav{
      position: relative;
      z-index: 1000;
     }
      #logo {
         fill: red;
      }



      .buttons {
         cursor: pointer;

      }

      .buttons:hover {
         background-color: black;
         color: white;
         border-radius: 50px;
      }


    .search {
         position: relative;
         width: 68vw;
         background-color: #E1E1E1;
         border-radius: 50px;
         
      } 
        
      .search input {
         outline: none;
         width: 95%;
         cursor: pointer;
         /* margin-left: 2vw; */
         border-radius: 50px;
         background-color: #E1E1E1;
         height: 100%;
         text-transform: capitalize;
         font-weight: 500;
      }



      .nav-2 {
         position: relative;
         background-color: #E9E9E9;
         width: 2vw;
         height: 2vw;
         border-radius: 50%;
         display: flex;
         align-items: center;
         justify-content: center;

      }


      .allpins::-webkit-scrollbar {
         display: none;

      }

        
      .pin {
         position: relative;
         overflow: hidden;

      }

      .pin img {
         width: 100%;
         height: 100%;
         object-fit: cover;
         object-position: center;
      }

      .pinprofile {
         position: relative;
         width: 35px;
         height: 35px;
         background-color: red;
         border-radius: 50%;

      }

      .pinprofile img {
         width: 100%;
         height: 100%;
         object-fit: cover;

      }

      .overlay {
         position: absolute;
         top: 0;
         left: 0;
         background-color: rgba(0, 0, 0, 0.438);
         z-index: 99;
         opacity: 0;
      }


      .overlay:hover {
         opacity: 1;
      }


      .main-overlay{
         position: absolute;
         top: 10%;
         right: 1%;
         background-color: white;
         box-shadow: 2px 3px 3px rgba(0, 0, 0, 0.319);
          
      }

     
      .hover{
         position: relative;
         border-radius: 10px;
         transition: all ease 3s;
         cursor: pointer;
      }
      

      .hover:hover{
         background-color: silver;
      }


      .searching{
         position: absolute;
         width: 65%;
         top: 11%;
         background-color: white;
         /* background-color: red; */
         z-index: 999;
         margin-left: 22%;
         border-radius: 10px;
         box-shadow: 2px 2px 1px silver;
         overflow-x: hidden;
         overflow-y: auto;
         
      }

      .searching::-webkit-scrollbar{
         display: none;
      }
       
      .searchuserdetails{
         transition: all 5s;
      }

      
      #settings {
      z-index: 9999;
      position: absolute;
      right: 3vw;
      top: 9%;
      background-color: #E60023;
      color: rgb(255, 255, 255);
    }



      .searchuserdetails:hover{
         background-color: rgb(240, 234, 234);
      }


      .searchpins{
         width: 100%;
         height: 100%;
         position: absolute;
         background-color: white;
         z-index: 999;
         top: 0;
         left: 0;
      }


      .allpins{
         position: relative;
         z-index: 1000;

      }
      

      
    @media only screen and (max-width: 608px){

      .nav{
         white-space: nowrap;

      }

      .part1 {
         gap: 0;
      }

      .nav .hide{
         display: none;
      }

      .nav #create{
         padding: 5px 9px;
         font-size: 14px;
         position: relative;
         right: 8%;
      }
 


      .nav .part2-nav{
         margin-top: 5px;
         margin-bottom: 0;
      }



      .nav #searchdiv{
         margin-right: 25px;
         width: 70vmax;
        
      }


      #searchdiv input{
         font-size: 13px;
         width: 95%;
         padding: 6px 15px;
      }



      #searchdiv i {
         color: #E60023;
         font-size: 12px;
         font-weight: 500;
      }


      .searchusertext{
         white-space: nowrap;

      }


      .searchusertext a{
         font-size: 14px;

      }

      .searchuserdetails i {
         font-size: 15px;

      }



      .allpins{
         width: 100%;
         position: relative;
         display: flex;
         justify-content: center;
      }


      .allpins .pincontainer {
         position: relative;
         margin-left: 10%;
      }

        
      .pincontainer .pin{
         width: 90%;
         height:30vh;
         overflow: hidden; 
      }

      .pincontainer .pin img{
         width: 100%;
         height: 100%;
         object-fit: cover;
      }


      .pincontainer .overlay{
         width: 90%;
         height:30vh;
         overflow: hidden; 
      }

     
      .searchpins{
         /* position: relative; */
         width: 100%;
         height: 85%;
         display: flex;
         justify-content: center;
         z-index: 999;
         top: 10%;
         overflow-y: auto;

      }


       
      .searchpins::-webkit-scrollbar{
         display: none;
      }
        
     
      .searchpins  #pinsearch{
         font-size: 15px;
         font-weight: 500;

      }
      


      .searchpins .searchpincontainer{
         position: relative;
         width: 95%;
         margin-left: 3%;
         margin-bottom: 25px;
      }
      


      .searchpincontainer .pin{
         width: 35vmax;
         height: 25vh;
   
      }

      
    }
      
   </style>


  
   <script>
   
   const username = `<%= user.username %>`;
   const arr = Array.from(username)
    
   const firstletter = arr[0]; 


   document.querySelector("#firstletter").innerHTML = firstletter

   
     let check = 0;

    document.querySelector("#set").addEventListener("click", function(event){
      if(check == 0){
          
      document.querySelector("#settings").style.display = "block";
       check = 1;
      }

      else{
          
      document.querySelector("#settings").style.display = "none";
      check = 0;
      }



    })

 
   
    document.querySelector("#searchinput").addEventListener("click", function(event){
      
      document.querySelector("#search").style.display = "none";
      document.querySelector("#cancel").style.display = "block";
      document.querySelector(".searching").style.display = "block";
      
    })


    document.querySelector("#cancel").addEventListener("click", function(event){
      document.querySelector("#searchinput").value = "";
      document.querySelector("#search").style.display = "block";
      document.querySelector(".searching").style.display = "none";
      document.querySelector(".searchpins").style.display = "none";
      document.querySelector(".allpins").style.display = "block";
      

    })



   
    let clutter = "";
   
const input = document.querySelector("#searchinput");

input.addEventListener("input", function(event) {

   document.querySelector(".allpins").style.display = "none";
  axios.get(`/search/${input.value}`)
    .then(response => {
       clutter = ""
      //  console.log(response.data);
       if(response.data.length > 0){
         response.data.forEach(function(elem){
         clutter += `<a href="/profile/${elem._id}">

            <div class="searchuserdetails cursor-pointer flex gap-5 items-center px-6 py-2 ">
               <i class="ri-search-line"></i>
              <a href="/profile/${elem._id}">
               <div class="searchuserprofile cursor-pointer w-[40px] h-[40px] rounded-full relative overflow-hidden">
                  <img class="w-full h-full object-cover" src="/images/uploads/${elem.profile}" alt="">
  
                </div>
              </a>
     
               <div class="searchusertext leading-none flex flex-col ">
                <a href="/profile/${elem._id}"><h3 class="cursor-pointer">${elem.username}</h3></a>
                 <a href="/profile/${elem._id}"><p class="cursor-pointer">${elem.fullname }</p></a>
                  </div>
             
                </div>
          </a>`
          
       })



       document.querySelector(".searching").innerHTML = clutter;
       }

       else{
         document.querySelector("#results").style.display = "block"
         document.querySelector(".searchpins").style.display = "block";
       }
     
    })

    .catch(error => {
       console.error('Error fetching data:', error);
    });

      
});



    let clutter2 = "";
   input.addEventListener("input", function(dets){
      axios.get(`/search/pin/${input.value}`)
      .then(function(response){
         clutter2 = "";
         console.log(response);

        
        if(response.data.length > 0){
        

            response.data.forEach(function(elem){

             clutter2 += ` 

             <a href= "/openpin/${elem._id}">  
               
               <div class="searchpincontainer inline-block mr-8">
         <div class="pin w-[220px] h-[320px] bg-red-600 rounded-3xl overflow-hidden ">
          <img class="w-full h-full object-cover" src="/images/uploads/${elem.image}" alt="">
         </div>
         <a href="/openpin/${elem._id}"> <h4 class="ml-2">${elem.title}</h4></a>
         <div class="pindets  flex gap-3 items-center ">
          <a href="/profile/${elem.user._id}">
            <div class="pinprofile w-[40px] h-[40px] rounded-full overflow-hidden">
               <img class="w-full h-full object-cover rounded-full" src="/images/uploads/${elem.user.profile}" alt="">
             </div>
          </a>
           
          <a  href= "/profile/${elem.user._id}">${elem.user.username}</h3</a>
          
         </div>
        
      </div>
             </a>

             `
         })


         document.querySelector(".searchpins").innerHTML = clutter2;

        }

        
        else{
        

        document.querySelector("#pinsearch").style.display="block";
        }


      })

      
   })
  
   </script>

  
<script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>


</body>

</html>